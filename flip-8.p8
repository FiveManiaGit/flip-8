pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
   --[[--
◆ flip-8 ◆
by fivemania
   ------
    2020
   --]]--
   
------- fun fact -------
--  did you know that --
--   flip is a pico-8 --
--  built-in function --
-- to yield until the --
--    next frame?     --
------------------------
---[ ]-yes----[ ]-no----

local wordtext = {}
local windraw = false

function readinput()
 local inp = stat(31)
 if inp ~= "" then
  return inp
 else
  return nil
 end
end

function _init()
 poke(0x5f2d, 1)
 local startsfx = 32767
 cls(5)
 print("select startup sound:\n[1] up-down\n[2] flip-8", 2, 2)
 repeat
  startsfx = tonum(readinput())
 until (startsfx == 1 or startsfx == 2)
 
 sfx(startsfx)
end

function _update()
 local char = readinput()
 if char then
  add(wordtext, char)
 end
 
 if windraw then
  local mx, my, mbtn = stat(32)-1, stat(33)-1, stat(34)
  if mbtn == 1 and mx >= 50 and my >= 10 and mx <= 52 and my <= 13 then
   windraw = false
   wordtext = {}
  elseif mbtn == 1 and mx >= 42 and my >= 10 and mx <= 44 and my <= 13 then
   windraw = false
  end
 else
  local mx, my, mbtn = stat(32)-1, stat(33)-1, stat(34)
  if mbtn == 1 and mx >= 9 and my >= 121 and mx <= 13 and my <= 126 then
   windraw = true
  end
 end
 
 local mx, my, mbtn = stat(32)-1, stat(33)-1, stat(34)
 if mbtn == 1 and mx >= 47 and my >= 120 and mx <= 62 and my <= 126 then
  cls(5)
  print("rebooting...\npress esc to shutdown.", 2, 2)
  for i = 1, 50 do flip() end
  run()
 end
end

function _draw()
 cls(6)
 print("flip - pico8 edition\nmouse position: "..(stat(32)-1)..", "..(stat(33)-1), 2, 2, 7)
 
 local barstep = 0
 for i = 48, 55 do
  spr(i, 8*barstep, 120)
  barstep = barstep + 1
 end

 if windraw then
	 local winstepx = 1
	 local winstepy = 1
	 for y = 0, 4 do
	  for x = 10, 15 do
	   spr((x+(16*y)), 8*winstepx, 8*winstepy)
	   winstepx = winstepx + 1
	  end
	  winstepx = 1
	  winstepy = winstepy + 1
	 end
	 
	 local linestep = 0
	 for index, letter in pairs(wordtext) do
	  if linestep < 1 then
	   print(letter, 10+(4*(index-1)), 18+(8*linestep), 0)
	  else
	   print(letter, 10+(4*(index-(11*linestep+1))), 18+(8*linestep), 0)
	  end
	  if index == 11 then
	   linestep = 1
	  elseif index == 22 then
	   linestep = 2
	  elseif index == 34 then
	   linestep = 0
	   wordtext = {}
	  end
	 end
	end
 
 spr(0, stat(32)-1, stat(33)-1)
 if stat(34) == 1 then
  spr(5, stat(32)-1, stat(33)-1)
 elseif stat(34) == 2 then
  spr(6, stat(32)-1, stat(33)-1)
 elseif stat(34) == 4 then
  spr(7, stat(32)-1, stat(33)-1)
 elseif readinput() then
  spr(8, stat(32)-1, stat(33)-1)
 end
end
__gfx__
01000000010000000011111000111100010000080100000001000000010000000000010000000000055555555555555555555555555555555555555555555550
17100000171000000171717101888810171000081710080017100c0017100b000111111000000000577777756666666666666666666666666666666666666665
177100001710000001717171180008811771000017710080177100c0177100b0177777710000000057ccc7756666666666666666666666666777777777777765
1777100017111110017777711800808117771008177710001777100017771000167676710000000057cccc756666666666666666666666666777771117778765
1777710017717171177777711808008117777100177771001777710017777100176767610000000057c7cc756666666666666666666666666777771717787765
1777771017777771177777711880008117777710177777101777771017777710167676710000000057c77c7566666666666666666666666667ccc71117877765
0117110017777771017777710188881001171100011711000117110001171100011111100000000057cccc756666666666666666666666666777777777777765
00010000011111100011111000111100000100000001000000010000000100000000000000000000577777756666666666666666666666666666666666666665
00000000000000000000000000000000000000000000000000000000000000000000000000000000555555555555555555555555555555555555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
00000000000000000000000000000000000000000000000000000000000000000000000000000000577777777777777777777777777777777777777777777775
55555555555555555555555555555555555555555555555555555555555555500000000000000000577777777777777777777777777777777777777777777775
77777777577777777777777775777777777777777777777577777777777777750000000000000000577777777777777777777777777777777777777777777775
789abc2757ccc77bbb7799977577ccc771111117c3ccca7577787777999775750000000000000000577777777777777777777777777777777777777777777775
789abc2757cccc7bbbb79999757ccc8c71711117333ccc7577787779777977750000000000000000577777777777777777777777777777777777777777777775
789abc2757c7cc7b7bb79799757cc1cc71171117c4cccc7578787879797975750000000000000000577777777777777777777777777777777777777777777775
789abc2757c77c7b77b79779757c6ccc71711717bbb3337578777879777977750000000000000000577777777777777777777777777777777777777777777775
789abc2757cccc7bbbb799997577ccc771111117bbbb337577888777999775750000000000000000577777777777777777777777777777777777777777777775
77777777577777777777777775777777777777777777777577777777777777750000000000000000055555555555555555555555555555555555555555555550
__sfx__
000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000001d15022150261502215016150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000001f04000000230402604000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 01024344

